<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>evolution - 進化中…</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    html,body{height:100%;margin:0}
    body{
      font-family:"Noto Sans JP",sans-serif;color:#fff;background:#000;
      display:flex;flex-direction:column;align-items:center;justify-content:center
    }
    .box{text-align:center}
    img{width:180px}
    .hint{opacity:.8;margin-top:10px}
  </style>
</head>
<body>
  <div class="box">
    <h2>進化中…</h2>
    <img id="img" alt="evolving">
    <div class="hint">少し待ってね → 会話に戻ります</div>
  </div>

<script>
const ROOT = (location.pathname.startsWith('/macaron/')) ? '/macaron' : '';
const asset = (p)=> `${ROOT}${p}`;
const color = localStorage.getItem('whoai_color') || 'blue';

const OPEN = {
  pink  : asset('/public/assets/stage2/pink_open.png'),
  blue  : asset('/public/assets/stage2/blue_open.png'),
  green : asset('/public/assets/stage2/green_open.png'),
  purple: asset('/public/assets/stage2/purple_open.png'),
};
const CLOSE = {
  pink  : asset('/public/assets/stage2/pink_closed.png'),
  blue  : asset('/public/assets/stage2/blue_closed.png'),
  green : asset('/public/assets/stage2/green_closed.png'),
  purple: asset('/public/assets/stage2/purple_closed.png'),
};

const img = document.getElementById('img');
img.src = OPEN[color] || OPEN.blue;

setTimeout(()=>{ img.src = (CLOSE[color]||CLOSE.blue); }, 500);
setTimeout(()=>{ location.href = asset('/whoai_talk.html'); }, 1100);
</script>
</body>
</html>
