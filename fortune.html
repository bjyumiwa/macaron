<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>今日の占い ✨</title>
  <style>
    html,body{height:100%;margin:0}
    body{
      font-family:"Noto Sans JP",sans-serif; color:#fff;
      background:url("public/assets/stage1/space_background.png") center/cover fixed no-repeat;
      display:flex; align-items:center; justify-content:center; text-align:center; padding:24px;
    }
    .panel{
      width:min(980px,96vw);
      background:rgba(0,0,0,.45); backdrop-filter:blur(4px);
      border-radius:24px; padding:28px 24px; box-shadow:0 10px 40px rgba(0,0,0,.35)
    }
    h1{font-size:32px;margin:6px 0 18px;text-shadow:0 2px 12px rgba(0,0,0,.4)}
    p{font-size:18px;margin:0 0 22px;line-height:1.8;opacity:.95}

    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:18px;margin-top:18px}
    .card{
      position:relative;
      background:#fff;border-radius:18px;
      box-shadow:0 12px 40px rgba(0,0,0,.07);
      padding:18px;text-align:center;cursor:pointer;
      transition:transform .12s ease, box-shadow .12s ease
    }
    .card:hover{transform:translateY(-2px);box-shadow:0 14px 46px rgba(0,0,0,.10)}
    .card img{width:120px;aspect-ratio:1/1;object-fit:contain;display:block;margin:8px auto 10px}
    .file-label{position:fixed;left:10px;bottom:10px;font-size:12px;opacity:.7}

    /* === ★ 可読性改善ここから === */
    .card span{
      display:inline-block;
      margin-top:6px;
      background: rgba(0,0,0,.62);
      color:#fff;
      font-weight:800;
      font-size:15px;
      letter-spacing:.03em;
      border-radius:999px;
      padding:6px 12px;
      text-shadow:0 1px 4px rgba(0,0,0,.85);
      -webkit-text-stroke:.2px rgba(0,0,0,.35);
      backdrop-filter: blur(2px);
    }
    /* 下端を暗めにして文字映えさせる */
    .card::after{
      content:"";
      position:absolute; left:0; right:0; bottom:0; height:40%;
      background:linear-gradient(to top, rgba(0,0,0,.35), rgba(0,0,0,0));
      border-radius:18px;
      pointer-events:none;
    }
    /* === ★ 可読性改善ここまで === */
  </style>
</head>
<body>
  <div class="panel">
    <h1>マカロン占いの結果は・・・？ ✨</h1>
    <div class="grid">
      <div class="card" data-color="pink">
        <img src="public/assets/stage1/macaron_pink.png" alt="ピンク">
        <span>ピンク</span>
      </div>
      <div class="card" data-color="blue">
        <img src="public/assets/stage1/macaron_blue.png" alt="ブルー">
        <span>ブルー</span>
      </div>
      <div class="card" data-color="green">
        <img src="public/assets/stage1/macaron_green.png" alt="グリーン">
        <span>グリーン</span>
      </div>
      <div class="card" data-color="purple">
        <img src="public/assets/stage1/macaron_purple.png" alt="パープル">
        <span>パープル</span>
      </div>
    </div>
    <div style="margin-top:20px;">
      <button id="randomBtn" class="card" style="padding:12px 24px;background:rgba(255,255,255,.16);color:#fff;font-weight:700;">おまかせ（ランダム）</button>
    </div>
  </div>
  <div class="file-label">/macaron/fortune.html</div>

  <script>
    const allowed = ['pink','blue','green','purple'];
    function saveColorAndGo(c){
      const chosen = (c||'').toLowerCase().trim();
      const color  = allowed.includes(chosen) ? chosen : 'green';
      localStorage.setItem('macaronColor', color);
      location.href = 'fortune_result.html?color='+color;
    }
    document.querySelectorAll('.card').forEach(el=>{
      const color = el.getAttribute('data-color');
      if(color){
        el.addEventListener('click',()=> saveColorAndGo(color));
        el.addEventListener('keydown',e=>{
          if(e.key==='Enter'||e.key===' '){ e.preventDefault(); saveColorAndGo(color); }
        });
      }
    });
    document.getElementById('randomBtn').addEventListener('click',()=>{
      const color = allowed[Math.floor(Math.random()*allowed.length)];
      saveColorAndGo(color);
    });
  </script>
</body>
</html>
