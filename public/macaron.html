<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>マカロンを選ぶ</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  body{margin:0;padding:24px;background:#0b0f19;color:#fff;font-family:"Noto Sans JP",sans-serif;text-align:center}
  .grid{display:grid;grid-template-columns:repeat(4,120px);gap:16px;justify-content:center;margin-top:20px}
  .card{padding:14px;border-radius:16px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);cursor:pointer}
  .card:hover{background:rgba(255,255,255,.14)}
</style>
</head>
<body>
  <h2>マカロンを食べて進化！色を選んでね</h2>
  <div class="grid">
    <div class="card" data-color="pink">ピンク（情熱）</div>
    <div class="card" data-color="blue">ブルー（静寂）</div>
    <div class="card" data-color="green">グリーン（元気）</div>
    <div class="card" data-color="purple">パープル（創造）</div>
  </div>

  <script>
    var K = { appear:'whoai_appearance', phase:'whoai_phase', turns:'whoai_cycleCount' };
    function pick(color){
      localStorage.setItem(K.appear, JSON.stringify(color)); // 見た目を保存
      localStorage.setItem(K.turns, '0');                    // 進化後の会話回数リセット
      // phase は whoai_talk.html 側ですでに 'evolved' に遷移済み
      location.href = './whoai_talk.html';                   // 会話へ戻る
    }
    document.querySelectorAll('.card').forEach(function(el){
      el.addEventListener('click', function(){ pick(el.getAttribute('data-color')); });
    });
  </script>
</body>
</html>
