<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WHOAI - マカロン選択</title>
  <style>
    html,body{height:100%;margin:0}
    body{
      font-family:"Noto Sans JP",system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif;
      color:#fff;
      background:url("public/assets/stage1/space_background.png") center/cover fixed no-repeat;
      display:flex;align-items:center;justify-content:center;text-align:center;padding:24px
    }
    .lang{position:fixed;top:14px;right:14px;display:flex;gap:8px;z-index:2}
    .lang button{border:none;border-radius:999px;padding:8px 14px;cursor:pointer;background:rgba(255,255,255,.14);color:#fff}
    .lang button.active{background:#fff;color:#111}
    .wrap{width:min(980px,94vw)}
    h1{font-size:36px;margin:0 0 10px;text-shadow:0 2px 12px rgba(0,0,0,.5)}
    p.lead{opacity:.95;margin:0 0 16px}
    .grid{
      display:grid;
      grid-template-columns: repeat(4, minmax(160px,1fr));
      gap:16px; margin-top:14px
    }
    .card{
      background:rgba(0,0,0,.38); border:1px solid rgba(255,255,255,.18);
      border-radius:18px; padding:16px; cursor:pointer;
      transition:transform .15s ease, box-shadow .15s ease, background .15s ease;
      display:flex;flex-direction:column;align-items:center;gap:10px
    }
    .card:hover{ transform:translateY(-2px); box-shadow:0 10px 28px rgba(0,0,0,.35) }
    .dot{
      width:84px;height:84px;border-radius:50%;
      border:3px solid rgba(255,255,255,.75); box-shadow:0 6px 16px rgba(0,0,0,.4)
    }
    .pink{   background:#ff8fb1 }
    .blue{   background:#88a7ff }
    .green{  background:#85f3b0 }
    .purple{ background:#c59bff }
    .name{font-weight:800;letter-spacing:.02em}
    .desc{font-size:14px;opacity:.95;line-height:1.6}
    .back{margin-top:14px}
    .back a{color:#cfe8ff}
    .page-tag{
      position:fixed;right:10px;bottom:10px;font-size:12px;opacity:.8;background:rgba(0,0,0,.35);
      padding:6px 8px;border-radius:8px
    }
    @media (max-width:760px){
      .grid{grid-template-columns: repeat(2, minmax(160px,1fr))}
    }
  </style>
</head>
<body>
  <div class="lang" aria-label="Language Switch">
    <button type="button" data-lang="ja" class="active">日本語</button>
    <button type="button" data-lang="en">English</button>
  </div>

  <main class="wrap">
    <h1 data-i18n="title">マカロンを選んでください</h1>
    <p class="lead" data-i18n="lead">色によって性格やストーリーが少し変わります。</p>

    <section class="grid" aria-label="Macaron Choices">
      <button class="card" data-color="pink">
        <div class="dot pink" aria-hidden="true"></div>
        <div class="name" data-i18n="pinkName">ピンク</div>
        <div class="desc" data-i18n="pinkDesc">情熱。前向きで、相手を励ます言葉が増えます。</div>
      </button>

      <button class="card" data-color="blue">
        <div class="dot blue" aria-hidden="true"></div>
        <div class="name" data-i18n="blueName">ブルー</div>
        <div class="desc" data-i18n="blueDesc">静寂。落ち着いて、丁寧に考える会話になります。</div>
      </button>

      <button class="card" data-color="green">
        <div class="dot green" aria-hidden="true"></div>
        <div class="name" data-i18n="greenName">グリーン</div>
        <div class="desc" data-i18n="greenDesc">元気。テンポがよく、行動を促す返答になります。</div>
      </button>

      <button class="card" data-color="purple">
        <div class="dot purple" aria-hidden="true"></div>
        <div class="name" data-i18n="purpleName">パープル</div>
        <div class="desc" data-i18n="purpleDesc">創造。比喩や発想の飛躍が少し増えます。</div>
      </button>
    </section>

    <div class="back"><a href="index.html" data-i18n="back">← タイトルにもどる</a></div>
  </main>

  <div class="page-tag">macaron.html（4色選択）</div>

  <script>
    // i18n
    const I18N = {
      ja:{
        title:"マカロンを選んでください",
        lead:"色によって性格やストーリーが少し変わります。",
        pinkName:"ピンク",  pinkDesc:"情熱。前向きで、相手を励ます言葉が増えます。",
        blueName:"ブルー",  blueDesc:"静寂。落ち着いて、丁寧に考える会話になります。",
        greenName:"グリーン",greenDesc:"元気。テンポがよく、行動を促す返答になります。",
        purpleName:"パープル",purpleDesc:"創造。比喩や発想の飛躍が少し増えます。",
        back:"← タイトルにもどる"
      },
      en:{
        title:"Choose a macaron",
        lead:"Each color slightly shapes the trait and story.",
        pinkName:"Pink",  pinkDesc:"Passion. Upbeat tone that cheers you on.",
        blueName:"Blue",  blueDesc:"Calm. Thoughtful, measured responses.",
        greenName:"Green",greenDesc:"Energy. Snappier replies nudging action.",
        purpleName:"Purple",purpleDesc:"Creativity. More metaphors and leaps of idea.",
        back:"← Back to Title"
      }
    };

    const langBtns = document.querySelectorAll('.lang button');
    function applyLang(lang){
      document.documentElement.lang = (lang==='ja'?'ja':'en');
      langBtns.forEach(b=>b.classList.toggle('active', b.dataset.lang===lang));
      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const k = el.getAttribute('data-i18n'); el.textContent = I18N[lang][k] ?? el.textContent;
      });
      localStorage.setItem('lang', lang);
    }
    langBtns.forEach(b=>b.addEventListener('click',()=>applyLang(b.dataset.lang)));
    applyLang(localStorage.getItem('lang') || 'ja');

    // 選択処理
    document.querySelectorAll('.card').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const color = btn.dataset.color;
        localStorage.setItem('selectedMacaron', color);
        // ここで次のページへ（会話ページなど）
        location.href = 'conversation.html';
      });
    });
  </script>
</body>
</html>
